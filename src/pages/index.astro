---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { fetchHeadlines } from '../lib/feeds';

const headlines = await fetchHeadlines(6);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<section class="hero">
				<p class="eyebrow">Live tech brief</p>
				<h1>{SITE_TITLE}</h1>
				<p class="lede">{SITE_DESCRIPTION}</p>
			</section>

			<section class="grid">
				{headlines.map((item) => (
					<article>
						<p class="meta">
							<span class="source">{item.source}</span>
							<span class="dot">â€¢</span>
							<span>{new Date(item.published).toLocaleString('en-US', {
								month: 'short',
								day: 'numeric',
								hour: '2-digit',
								minute: '2-digit',
								hour12: false,
							})}</span>
						</p>
						<h3><a href={item.link} target="_blank" rel="noopener noreferrer">{item.title}</a></h3>
					</article>
				))}
			</section>
		</main>
		<Footer />
	</body>
</html>

<style>
	.hero {
		margin-bottom: 2rem;
	}
	.eyebrow {
		letter-spacing: 0.08em;
		text-transform: uppercase;
		color: rgb(var(--gray));
		font-size: 0.9rem;
		margin: 0 0 0.5rem 0;
	}
	.lede {
		color: rgb(var(--gray));
		max-width: 720px;
		margin: 0;
	}
	.grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
		gap: 1rem;
	}
	article {
		background: white;
		padding: 1rem 1.25rem;
		border-radius: 12px;
		box-shadow: 0 6px 30px rgba(15, 18, 25, 0.08);
		border: 1px solid rgba(15, 18, 25, 0.05);
	}
	.meta {
		margin: 0 0 0.35rem 0;
		color: rgb(var(--gray));
		font-size: 0.95rem;
		display: flex;
		align-items: center;
		gap: 0.35rem;
	}
	.meta .source {
		font-weight: 700;
		color: rgb(var(--black));
	}
	.meta .dot {
		opacity: 0.4;
	}
	h3 {
		margin: 0;
		font-size: 1.15rem;
		line-height: 1.35;
	}
	h3 a {
		color: rgb(var(--black));
		text-decoration: none;
	}
	h3 a:hover {
		color: var(--accent);
	}
</style>
